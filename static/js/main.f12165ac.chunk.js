(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,n){e.exports={loading:"Loading_loading__2xAve"}},119:function(e,t,n){e.exports={card:"MovieCard_card__MkDsz"}},125:function(e,t,n){e.exports=n(261)},214:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),i=n(18),l=n(27),u=n(113),s=n(9),m="LIST_REFRESH",d="LIST_LOAD",E="LIST_LOAD_OK",p="LIST_LOAD_KO",f="DETAIL_REFRESH",v="DETAIL_LOAD",O="DETAIL_LOAD_OK",y="DETAIL_LOAD_KO",h={configuration:null,loading:!1,error:!1},g=n(21);var b={query:"",results:null,loading:!1,error:!1},_=Object(l.c)({common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIGURATION_LOAD":return Object(s.a)({},e,{error:!1,loading:!0});case"CONFIGURATION_LOAD_OK":return Object(s.a)({},e,{error:!1,loading:!1,configuration:t.payload});case"CONFIGURATION_LOAD_KO":return Object(s.a)({},e,{error:!0,loading:!1});default:return e}},listsByType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:case d:case E:case p:return Object(s.a)({},e,Object(g.a)({},t.listType,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,error:!1,refresh:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(s.a)({},e,{refresh:!0});case d:return Object(s.a)({},e,{refresh:!1,loading:!0,error:!1});case E:return Object(s.a)({},e,{loading:!1,items:t.payload});case p:return Object(s.a)({},e,{error:!0,loading:!1});default:return e}}(e[t.listType],t)));default:return e}},detailsByKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:case v:case O:case y:return Object(s.a)({},e,Object(g.a)({},t.detailKey,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,error:!1,refresh:!1,item:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(s.a)({},e,{refresh:!0});case v:return Object(s.a)({},e,{refresh:!1,loading:!0,error:!1});case O:return Object(s.a)({},e,{loading:!1,item:t.payload});case y:return Object(s.a)({},e,{error:!0,loading:!1});default:return e}}(e[t.detailKey],t)));default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_LOAD":return Object(s.a)({},e,{error:!1,loading:!0,query:t.payload});case"SEARCH_LOAD_OK":return Object(s.a)({},e,{error:!1,loading:!1,results:t.payload});case"SEARCH_LOAD_KO":return Object(s.a)({},e,{error:!0,loading:!1});default:return e}}}),T=[u.a],A=function(e){return Object(l.d)(_,e,l.a.apply(void 0,T))},R=(n(134),n(32)),I=n(33),P=n(38),j=n(34),S=n(39),w=n(36),N=n(28),L=n(75),C=n(35),D=n.n(C),k=n(114),M=n.n(k),V={_ok:"ok",environment:"dev"},U=new Proxy(V,{get:function(e,t){if(t){var n="REACT_APP_"+t.toUpperCase();return n in Object({NODE_ENV:"production",PUBLIC_URL:"/react-tmdb-player",REACT_APP_ENVIRONMENT:"prod",REACT_APP_VERSION:"0.1.0",REACT_APP_NAME:"react-tmdb-player",REACT_APP_TMDB_APIKEY:"59119c7983369d25d53cc6784b25d14c"})?Object({NODE_ENV:"production",PUBLIC_URL:"/react-tmdb-player",REACT_APP_ENVIRONMENT:"prod",REACT_APP_VERSION:"0.1.0",REACT_APP_NAME:"react-tmdb-player",REACT_APP_TMDB_APIKEY:"59119c7983369d25d53cc6784b25d14c"})[n]:t in V?V[t]:void 0}}}),K=U.TMDB_APIKEY,B=function(e){e.query({api_key:K})},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.a.get("".concat("https://api.themoviedb.org/3").concat(e)).query(t).use(B)},x={popular:function(){return H("/movie/popular")},discoverByGenre:function(e){return H("/discover/movie",{with_genres:e})},details:function(e){return H("/movie/".concat(e))}},F={popular:function(){return H("/tv/popular")},discoverByGenre:function(e){return H("/discover/tv",{with_genres:e})},details:function(e){return H("/tv/".concat(e))}},G={byTypeOptions:function(e,t){switch(e){case z.POPULAR_MOVIES:return x.popular();case z.POPULAR_SERIES:return F.popular();case z.MOVIES_GENRE:return x.discoverByGenre(t.genre);case z.SERIES_GENRE:return F.discoverByGenre(t.genre);default:throw new Error("unknown list type: ".concat(e))}}},q={byType:function(e,t){switch(e){case J.MOVIE:return x.details(t);case J.TV:return F.details(t);default:throw new Error("unknown item type: ".concat(e))}}},z={POPULAR_MOVIES:"POPULAR_MOVIES",POPULAR_SERIES:"POPULAR_SERIES",MOVIES_GENRE:"MOVIES_GENRE",SERIES_GENRE:"SERIES_GENRE"},W=10751,Y=99,J={MOVIE:"MOVIE",TV:"TV"},Q=function(e){return{id:e.id,title:e.title,poster_path:e.poster_path,itemType:J.MOVIE}},X=function(e){return{id:e.id,title:e.name,poster_path:e.poster_path,itemType:J.TV}},Z="w154",$="w500",ee=function(e,t,n){var a=D()(n,"images.base_url","");return"".concat(a).concat(t).concat(e)},te=function(e){return e.results},ne=function(e){return e.results.reduce(function(e,t){switch(t.media_type){case"movie":return[].concat(Object(L.a)(e),[Q(t)]);case"tv":return[].concat(Object(L.a)(e),[X(t)]);default:return e}},[])},ae={Common:{configuration:function(){return H("/configuration")}},Movies:x,Series:F,Lists:G,Details:q,Search:{multi:function(e){return H("/search/multi",{query:e})}}},re="/react-tmdb-player",oe={HOME:"".concat(re,"/"),DETAILMOVIE:"".concat(re,"/movie/:id"),DETAILTV:"".concat(re,"/tv/:id"),SEARCH:"".concat(re,"/search/"),SEARCHKEYWORD:"".concat(re,"/search/:keyword")},ce=oe,ie=n(23),le=n.n(ie),ue=n(13),se=n.n(ue),me=n(15),de=n.n(me),Ee=n(48),pe=n.n(Ee),fe=n(72),ve=n.n(fe),Oe=function(e){return r.a.createElement(pe.a,{bg:"light",expand:"sm"},r.a.createElement(pe.a.Brand,{as:w.b,to:ce.HOME},"Home"),r.a.createElement(pe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(pe.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(ve.a,{className:"ml-auto"},r.a.createElement(ve.a.Link,{as:w.b,to:ce.SEARCH},"Search"))))},ye=function(e){var t=e.children,n=e.containerClassName,a=e.rowClassName;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe,null),r.a.createElement(le.a,{className:n},r.a.createElement(se.a,{className:a},r.a.createElement(de.a,null,t))))};ye.defaultProps={containerClassName:"",rowClassName:""};var he=ye,ge=n(8),be=n.n(ge),_e=n(73),Te=n.n(_e),Ae=function(){return{type:"CONFIGURATION_LOAD"}},Re=function(e){return{type:"CONFIGURATION_LOAD_OK",payload:e}},Ie=function(){return{type:"CONFIGURATION_LOAD_KO"}};function Pe(){return function(e,t){if(!(n=t()).configuration||!n.loading)return e(function(e){return e(Ae()),ae.Common.configuration().then(function(t){var n=t.body;e(Re(n))},function(t){e(Ie())})});var n}}var je=function(e,t){return{type:d,listType:Ne(e,t)}},Se=function(e,t,n){return{type:E,listType:Ne(e,t),payload:n}},we=function(e,t){return{type:p,listType:Ne(e,t)}},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t).sort().map(function(e){return"".concat(e,"_").concat(t[e])}).join("_");return Te()("".concat(e,"_").concat(n))};function Le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){if(function(e,t,n){var a=Ne(t,n),r=e.listsByType[a];return!r||!!r.refresh||!!r.error}(a(),e,t))return n(function(e,t){return function(n){return n(je(e,t)),ae.Lists.byTypeOptions(e,t).then(function(a){var r=te(a.body);n(Se(e,t,r))},function(a){n(we(e,t))})}}(e,t))}}var Ce=function(e,t){return Te()("".concat(e,"_").concat(t))},De=function(e){return{type:v,detailKey:e}},ke=function(e,t){return{type:O,detailKey:e,payload:t}},Me=function(e){return{type:y,detailKey:e}};function Ve(e,t){return function(n,a){if(function(e,t,n){var a=Ce(t,n),r=e.detailsByKey[a];return!r||!!r.refresh||!!r.error}(a(),e,t))return n(function(e,t){var n=Ce(e,t);return function(a){return a(De(n)),ae.Details.byType(e,t).then(function(e){var t=e.body;a(ke(n,t))},function(e){a(Me(n))})}}(e,t))}}var Ue=function(e){return{type:"SEARCH_LOAD",payload:e}},Ke=function(e){return{type:"SEARCH_LOAD_OK",payload:e}},Be=function(){return{type:"SEARCH_LOAD_KO"}};var He=n(24),xe=n(117),Fe=n.n(xe),Ge=function(e){var t=e.mx,n=e.color,a={borderColor:"".concat(n," transparent transparent transparent")};return r.a.createElement("div",{className:Fe.a.loading,style:{marginTop:t,marginBottom:t}},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",{style:a}),r.a.createElement("div",{style:a}),r.a.createElement("div",{style:a}),r.a.createElement("div",{style:a})))};Ge.defaultProps={mx:"64px",color:"#ccc"};var qe=Ge,ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe;return function(n){return function(a){return r.a.createElement(r.a.Fragment,null,e(a)&&r.a.createElement(t,null),r.a.createElement(n,a))}}},We=n(118),Ye=n.n(We),Je=(n(212),function(e){var t=e.items;return r.a.createElement(Ye.a,{items:t,responsive:{0:{items:4},600:{items:6},1200:{items:8}},autoPlayInterval:2e3,autoPlayDirection:"rtl",fadeOutAnimation:!0,mouseDragEnabled:!0,dotsDisabled:!1,buttonsDisabled:!0})}),Qe=n(49),Xe=n.n(Qe),Ze=n(119),$e=n.n(Ze),et=function(e){var t=e.imageUrl,n=e.title,a=e.history,o=e.itemType,c=e.id;return r.a.createElement(Xe.a,{className:"bg-dark text-white ".concat($e.a.card),onClick:function(e){a.push(function(e,t){switch(t){case J.TV:return oe.DETAILTV.replace(":id",e);case J.MOVIE:default:return oe.DETAILMOVIE.replace(":id",e)}}(c,o))}},r.a.createElement(Xe.a.Img,{src:t,alt:n}),r.a.createElement(Xe.a.ImgOverlay,null,r.a.createElement(Xe.a.Title,null,n)))};et.defaultProps={};var tt=Object(N.e)(et),nt=function(e){var t=e.title,n=e.items,a=e.configurationTmdb,o=n.map(function(e){return r.a.createElement(tt,Object.assign({imageUrl:ee(e.poster_path,Z,a)},e))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t),r.a.createElement(Je,{items:o}))},at=function(e){function t(){return Object(R.a)(this,t),Object(P.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){return r.a.createElement(nt,this.props)}}]),t}(r.a.Component),rt=Object(He.a)(Object(i.b)(function(e,t){var n=t.listType,a=t.listOptions,r=Ne(n,a),o=e.listsByType[r]||{loading:!0,error:!1,items:[]},c=function(e){switch(e){case z.POPULAR_SERIES:case z.SERIES_GENRE:return X;default:return Q}}(n);return{error:o.error,loading:o.loading,items:o.items.map(c),configurationTmdb:e.common.configuration}},function(e,t){var n=t.listType,a=t.listOptions;return{onLoad:function(){return e(Le(n,a))}}}),ze(function(e){return e.loading}))(at);rt.defaultProps={listOptions:{}},rt.propTypes={title:be.a.string.isRequired,listType:be.a.oneOf(Object.keys(z)).isRequired,listOptions:be.a.object};var ot=rt,ct=function(e){return r.a.createElement(he,null,r.a.createElement(le.a,null,r.a.createElement(se.a,null,r.a.createElement(ot,{title:"Popular movies",listType:z.POPULAR_MOVIES})),r.a.createElement(se.a,null,r.a.createElement(ot,{title:"Popular series",listType:z.POPULAR_SERIES})),r.a.createElement(se.a,null,r.a.createElement(ot,{title:"Family",listType:z.POPULAR_SERIES,listOptions:{genre:W}})),r.a.createElement(se.a,null,r.a.createElement(ot,{title:"Documentary",listType:z.MOVIES_GENRE,listOptions:{genre:Y}}))))},it=n(60),lt=n(121),ut=n.n(lt),st=n(47),mt=n.n(st),dt=n(40),Et=n.n(dt),pt=n(37),ft=n(120),vt=n.n(ft);function Ot(e){yt(e.detail)}function yt(e){console.error("[ShakaPlayer] Error code",e.code,"object",e)}var ht=function(e){var t=e.id,n=e.imageUrl,a=e.videoUrl,o=e.width;return r.a.useEffect(function(){window.shaka.polyfill.installAll(),window.shaka.Player.isBrowserSupported()?function(e,t){var n=document.getElementById(e),a=new window.shaka.Player(n);window.player=a,a.addEventListener("error",Ot),a.load(t).then(function(){console.log("[ShakaPlayer] The video has now been loaded!"),n.requestFullscreen?(console.log("[ShakaPlayer] requesting full screen ..."),n.requestFullscreen()):console.error("[ShakaPlayer] full screen not available!")}).catch(yt)}(t,a):console.error("[ShakaPlayer] Browser not supported!")},[t,n,a]),r.a.createElement(vt.a,{aspect:"a16by9"},r.a.createElement("video",{id:t,width:o,poster:n,controls:!0,autoPlay:!0}))};ht.defaultProps={id:"video",width:"640"};var gt=ht,bt=(n(214),function(e){var t=e.message;return r.a.createElement("div",{className:"container d-flex h-100"},r.a.createElement("div",{className:" mx-auto align-self-center text-center"},r.a.createElement(pt.a,{className:"m-4",size:"6em"}),r.a.createElement("h1",null,t)))});bt.defaultProps={message:"Something went wrong, retry later."};var _t,Tt=bt;var At=(_t={},Object(g.a)(_t,J.MOVIE,function(e){var t=e.title,n=e.poster_path,a=e.overview,r=e.vote_average,o=e.popularity;return e.genres,{title:t,image:n,description:a,meta:{vote:r,popularity:o}}}),Object(g.a)(_t,J.TV,function(e){return{title:e.name,image:e.poster_path,description:e.overview,meta:{}}}),_t),Rt=function(e){var t=r.a.useState(!1),n=Object(it.a)(t,2),a=n[0],o=n[1],c=e.item,i=e.configurationTmdb,l=e.itemType,u=e.loading,s=e.error;if(u)return null;if(s)return r.a.createElement(Tt,{message:"Item not found"});var m=At[l]?At[l](c):c,d=m.title,E=m.description,p=m.image,f=m.meta,v=ee(p,$,i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{show:a,onHide:function(){return o(!1)},size:"xl"},r.a.createElement(Et.a.Header,{closeButton:!0},r.a.createElement(Et.a.Title,null,d)),r.a.createElement(Et.a.Body,null,r.a.createElement(gt,{imageUrl:ee(p,Z,i),videoUrl:"https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd",width:320})),r.a.createElement(Et.a.Footer,null,r.a.createElement(mt.a,{variant:"secondary",onClick:function(){return o(!1)}},"Close"))),r.a.createElement(le.a,{className:"m-2 pt-2"},r.a.createElement(se.a,null,r.a.createElement(de.a,null,r.a.createElement("h1",null,d),r.a.createElement("p",{className:"lead"},E),r.a.createElement("hr",null),r.a.createElement("dl",{className:"row"},Object.keys(f).map(function(e,t){return r.a.createElement(r.a.Fragment,{key:"meta".concat(t)},r.a.createElement("dt",{className:"col-sm-3"},e),r.a.createElement("dd",{className:"col-sm-9"},f[e]))})),r.a.createElement("hr",null),r.a.createElement(mt.a,{variant:"primary",size:"lg",block:!0,onClick:function(e){e.preventDefault(),o(!0)}},r.a.createElement(pt.b,null)," Play")),r.a.createElement(de.a,{className:"align-self-center"},r.a.createElement(ut.a,{src:v,thumbnail:!0})))))};Rt.defaultProps={};var It=Rt,Pt=function(e){function t(){return Object(R.a)(this,t),Object(P.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){return r.a.createElement(It,this.props)}}]),t}(r.a.Component);function jt(e){var t=e.isTv,n=e.isMovie;return t?J.TV:n?J.MOVIE:void 0}var St=Object(He.a)(Object(i.b)(function(e,t){var n=t.id,a=jt(t),r=Ce(a,n),o=e.detailsByKey[r]||{loading:!0,error:!1,item:{}};return Object(s.a)({},o,{itemType:a,configurationTmdb:e.common.configuration})},function(e,t){var n=t.id,a=jt(t);return{onLoad:function(){return e(Ve(a,n))}}}),ze(function(e){return e.loading}))(Pt);St.defaultProps={},St.propTypes={id:be.a.string.isRequired,isTv:be.a.bool,isMovie:be.a.bool};var wt=St,Nt=function(e){var t=e.match,n=e.isTv,a=e.isMovie,o=D()(t,"params.id");return r.a.createElement(he,null,r.a.createElement(wt,{isTv:n,isMovie:a,id:o}))},Lt=n(61),Ct=n.n(Lt),Dt=n(123),kt=n.n(Dt),Mt=n(124),Vt=n.n(Mt),Ut=n(122),Kt=n.n(Ut),Bt=function(e){var t=e.keyword,n=e.query,a=e.loading,o=e.results,c=e.fetchSearch,i=e.configurationTmdb,l=r.a.useState(t||n),u=Object(it.a)(l,2),s=u[0],m=u[1],d=o?o.filter(function(e){return e.poster_path&&e.title}).map(function(e){return r.a.createElement(tt,Object.assign({imageUrl:ee(e.poster_path,Z,i)},e))}):null;return r.a.createElement(le.a,{className:"mt-4"},r.a.createElement(se.a,{className:"mt-4"},r.a.createElement(de.a,null,r.a.createElement("h1",null,"Search"))),r.a.createElement(se.a,{className:"mb-4"},r.a.createElement(de.a,null,r.a.createElement(Ct.a,{onSubmit:function(e){e.preventDefault(),c(s)}},r.a.createElement(Ct.a.Row,null,r.a.createElement(de.a,{sm:10},r.a.createElement(Ct.a.Control,{autoFocus:!0,placeholder:"search movies and tv series titles",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement(de.a,{sm:2},r.a.createElement(mt.a,{disabled:a||Kt()(s),block:!0,variant:"primary",type:"submit"},a&&r.a.createElement(kt.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),!a&&r.a.createElement(pt.c,null))))))),r.a.createElement(se.a,null,r.a.createElement(de.a,null,r.a.createElement(Vt.a,null,d))))};Bt.defaultProps={keyword:"",query:"",results:[]};var Ht=Bt,xt=Object(He.a)(Object(i.b)(function(e){var t=e.search;return Object(s.a)({},t,{configurationTmdb:e.common.configuration})},function(e){return{fetchSearch:function(t){return e(function(e){return function(t){return t(Ue(e)),ae.Search.multi(e).then(function(e){var n=ne(e.body);t(Ke(n))},function(e){t(Be())})}}(t))}}}))(Ht),Ft=function(e){var t=e.match,n=D()(t,"params.keyword");return r.a.createElement(he,null,r.a.createElement(xt,{keyword:n}))},Gt=function(e){var t=e.location,n=void 0===t?{}:t;return r.a.createElement(he,{containerClassName:"fullscreen",rowClassName:"fullscreen"},r.a.createElement(Tt,{message:"Object not found for ".concat(n.pathname)}))},qt=function(e){return r.a.createElement(w.a,null,r.a.createElement(N.c,null,r.a.createElement(N.a,{exact:!0,path:[ce.SEARCH,ce.SEARCHKEYWORD],component:Ft}),r.a.createElement(N.a,{exact:!0,path:ce.DETAILMOVIE,render:function(e){return r.a.createElement(Nt,Object.assign({},e,{isMovie:!0}))}}),r.a.createElement(N.a,{exact:!0,path:ce.DETAILTV,render:function(e){return r.a.createElement(Nt,Object.assign({},e,{isTv:!0}))}}),r.a.createElement(N.a,{exact:!0,path:ce.HOME,component:ct}),r.a.createElement(N.a,{component:Gt})))},zt=function(e){function t(){return Object(R.a)(this,t),Object(P.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.loading;return r.a.createElement(qt,{error:t,loading:n})}}]),t}(r.a.Component),Wt=Object(He.a)(Object(i.b)(function(e){return{error:e.common.error,loading:e.common.loading}},function(e){return{onLoad:function(){return e(Pe())}}}),ze(function(e){return e.loading}))(zt),Yt=A();c.a.render(r.a.createElement(i.a,{store:Yt},r.a.createElement(Wt,null)),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.f12165ac.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,n){e.exports={loading:"Loading_loading__2xAve"}},119:function(e,t,n){e.exports={card:"MovieCard_card__MkDsz"}},125:function(e,t,n){e.exports=n(261)},214:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),i=n(18),l=n(27),u=n(113),s=n(9),m="LIST_REFRESH",d="LIST_LOAD",E="LIST_LOAD_OK",p="LIST_LOAD_KO",f="DETAIL_REFRESH",v="DETAIL_LOAD",O="DETAIL_LOAD_OK",y="DETAIL_LOAD_KO",h={configuration:null,loading:!1,error:!1},g=n(21);var b={query:"",results:null,loading:!1,error:!1},_=Object(l.c)({common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIGURATION_LOAD":return Object(s.a)({},e,{error:!1,loading:!0});case"CONFIGURATION_LOAD_OK":return Object(s.a)({},e,{error:!1,loading:!1,configuration:t.payload});case"CONFIGURATION_LOAD_KO":return Object(s.a)({},e,{error:!0,loading:!1});default:return e}},listsByType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:case d:case E:case p:return Object(s.a)({},e,Object(g.a)({},t.listType,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,error:!1,refresh:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(s.a)({},e,{refresh:!0});case d:return Object(s.a)({},e,{refresh:!1,loading:!0,error:!1});case E:return Object(s.a)({},e,{loading:!1,items:t.payload});case p:return Object(s.a)({},e,{error:!0,loading:!1});default:return e}}(e[t.listType],t)));default:return e}},detailsByKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:case v:case O:case y:return Object(s.a)({},e,Object(g.a)({},t.detailKey,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,error:!1,refresh:!1,item:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(s.a)({},e,{refresh:!0});case v:return Object(s.a)({},e,{refresh:!1,loading:!0,error:!1});case O:return Object(s.a)({},e,{loading:!1,item:t.payload});case y:return Object(s.a)({},e,{error:!0,loading:!1});default:return e}}(e[t.detailKey],t)));default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_LOAD":return Object(s.a)({},e,{error:!1,loading:!0,query:t.payload});case"SEARCH_LOAD_OK":return Object(s.a)({},e,{error:!1,loading:!1,results:t.payload});case"SEARCH_LOAD_KO":return Object(s.a)({},e,{error:!0,loading:!1});default:return e}}}),T=[u.a],A=function(e){return Object(l.d)(_,e,l.a.apply(void 0,T))},R=(n(134),n(32)),I=n(33),P=n(38),j=n(34),S=n(39),w=n(36),N=n(28),L=n(75),C=n(35),D=n.n(C),k=n(114),M=n.n(k),V={_ok:"ok",environment:"dev"},U=new Proxy(V,{get:function(e,t){if(t){var n="REACT_APP_"+t.toUpperCase();return n in Object({NODE_ENV:"production",PUBLIC_URL:"/react-tmdb-player",REACT_APP_ENVIRONMENT:"prod",REACT_APP_VERSION:"0.1.0",REACT_APP_NAME:"react-tmdb-player",REACT_APP_TMDB_APIKEY:"59119c7983369d25d53cc6784b25d14c"})?Object({NODE_ENV:"production",PUBLIC_URL:"/react-tmdb-player",REACT_APP_ENVIRONMENT:"prod",REACT_APP_VERSION:"0.1.0",REACT_APP_NAME:"react-tmdb-player",REACT_APP_TMDB_APIKEY:"59119c7983369d25d53cc6784b25d14c"})[n]:t in V?V[t]:void 0}}}),K=U.TMDB_APIKEY,B="https:"===window.location.protocol,H=function(e){e.query({api_key:K})},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.a.get("".concat("https://api.themoviedb.org/3").concat(e)).query(t).use(H)},F={popular:function(){return x("/movie/popular")},discoverByGenre:function(e){return x("/discover/movie",{with_genres:e})},details:function(e){return x("/movie/".concat(e))}},G={popular:function(){return x("/tv/popular")},discoverByGenre:function(e){return x("/discover/tv",{with_genres:e})},details:function(e){return x("/tv/".concat(e))}},q={byTypeOptions:function(e,t){switch(e){case W.POPULAR_MOVIES:return F.popular();case W.POPULAR_SERIES:return G.popular();case W.MOVIES_GENRE:return F.discoverByGenre(t.genre);case W.SERIES_GENRE:return G.discoverByGenre(t.genre);default:throw new Error("unknown list type: ".concat(e))}}},z={byType:function(e,t){switch(e){case Q.MOVIE:return F.details(t);case Q.TV:return G.details(t);default:throw new Error("unknown item type: ".concat(e))}}},W={POPULAR_MOVIES:"POPULAR_MOVIES",POPULAR_SERIES:"POPULAR_SERIES",MOVIES_GENRE:"MOVIES_GENRE",SERIES_GENRE:"SERIES_GENRE"},Y=10751,J=99,Q={MOVIE:"MOVIE",TV:"TV"},X=function(e){return{id:e.id,title:e.title,poster_path:e.poster_path,itemType:Q.MOVIE}},Z=function(e){return{id:e.id,title:e.name,poster_path:e.poster_path,itemType:Q.TV}},$="w154",ee="w500",te=function(e,t,n){var a=D()(n,B?"images.secure_base_url":"images.base_url","");return"".concat(a).concat(t).concat(e)},ne=function(e){return e.results},ae=function(e){return e.results.reduce(function(e,t){switch(t.media_type){case"movie":return[].concat(Object(L.a)(e),[X(t)]);case"tv":return[].concat(Object(L.a)(e),[Z(t)]);default:return e}},[])},re={Common:{configuration:function(){return x("/configuration")}},Movies:F,Series:G,Lists:q,Details:z,Search:{multi:function(e){return x("/search/multi",{query:e})}}},oe="/react-tmdb-player",ce={HOME:"".concat(oe,"/"),DETAILMOVIE:"".concat(oe,"/movie/:id"),DETAILTV:"".concat(oe,"/tv/:id"),SEARCH:"".concat(oe,"/search/"),SEARCHKEYWORD:"".concat(oe,"/search/:keyword")},ie=ce,le=n(23),ue=n.n(le),se=n(13),me=n.n(se),de=n(15),Ee=n.n(de),pe=n(48),fe=n.n(pe),ve=n(72),Oe=n.n(ve),ye=function(e){return r.a.createElement(fe.a,{bg:"light",expand:"sm"},r.a.createElement(fe.a.Brand,{as:w.b,to:ie.HOME},"Home"),r.a.createElement(fe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(fe.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Oe.a,{className:"ml-auto"},r.a.createElement(Oe.a.Link,{as:w.b,to:ie.SEARCH},"Search"))))},he=function(e){var t=e.children,n=e.containerClassName,a=e.rowClassName;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,null),r.a.createElement(ue.a,{className:n},r.a.createElement(me.a,{className:a},r.a.createElement(Ee.a,null,t))))};he.defaultProps={containerClassName:"",rowClassName:""};var ge=he,be=n(8),_e=n.n(be),Te=n(73),Ae=n.n(Te),Re=function(){return{type:"CONFIGURATION_LOAD"}},Ie=function(e){return{type:"CONFIGURATION_LOAD_OK",payload:e}},Pe=function(){return{type:"CONFIGURATION_LOAD_KO"}};function je(){return function(e,t){if(!(n=t()).configuration||!n.loading)return e(function(e){return e(Re()),re.Common.configuration().then(function(t){var n=t.body;e(Ie(n))},function(t){e(Pe())})});var n}}var Se=function(e,t){return{type:d,listType:Le(e,t)}},we=function(e,t,n){return{type:E,listType:Le(e,t),payload:n}},Ne=function(e,t){return{type:p,listType:Le(e,t)}},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t).sort().map(function(e){return"".concat(e,"_").concat(t[e])}).join("_");return Ae()("".concat(e,"_").concat(n))};function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){if(function(e,t,n){var a=Le(t,n),r=e.listsByType[a];return!r||!!r.refresh||!!r.error}(a(),e,t))return n(function(e,t){return function(n){return n(Se(e,t)),re.Lists.byTypeOptions(e,t).then(function(a){var r=ne(a.body);n(we(e,t,r))},function(a){n(Ne(e,t))})}}(e,t))}}var De=function(e,t){return Ae()("".concat(e,"_").concat(t))},ke=function(e){return{type:v,detailKey:e}},Me=function(e,t){return{type:O,detailKey:e,payload:t}},Ve=function(e){return{type:y,detailKey:e}};function Ue(e,t){return function(n,a){if(function(e,t,n){var a=De(t,n),r=e.detailsByKey[a];return!r||!!r.refresh||!!r.error}(a(),e,t))return n(function(e,t){var n=De(e,t);return function(a){return a(ke(n)),re.Details.byType(e,t).then(function(e){var t=e.body;a(Me(n,t))},function(e){a(Ve(n))})}}(e,t))}}var Ke=function(e){return{type:"SEARCH_LOAD",payload:e}},Be=function(e){return{type:"SEARCH_LOAD_OK",payload:e}},He=function(){return{type:"SEARCH_LOAD_KO"}};var xe=n(24),Fe=n(117),Ge=n.n(Fe),qe=function(e){var t=e.mx,n=e.color,a={borderColor:"".concat(n," transparent transparent transparent")};return r.a.createElement("div",{className:Ge.a.loading,style:{marginTop:t,marginBottom:t}},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",{style:a}),r.a.createElement("div",{style:a}),r.a.createElement("div",{style:a}),r.a.createElement("div",{style:a})))};qe.defaultProps={mx:"64px",color:"#ccc"};var ze=qe,We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ze;return function(n){return function(a){return r.a.createElement(r.a.Fragment,null,e(a)&&r.a.createElement(t,null),r.a.createElement(n,a))}}},Ye=n(118),Je=n.n(Ye),Qe=(n(212),function(e){var t=e.items;return r.a.createElement(Je.a,{items:t,responsive:{0:{items:4},600:{items:6},1200:{items:8}},autoPlayInterval:2e3,autoPlayDirection:"rtl",fadeOutAnimation:!0,mouseDragEnabled:!0,dotsDisabled:!1,buttonsDisabled:!0})}),Xe=n(49),Ze=n.n(Xe),$e=n(119),et=n.n($e),tt=function(e){var t=e.imageUrl,n=e.title,a=e.history,o=e.itemType,c=e.id;return r.a.createElement(Ze.a,{className:"bg-dark text-white ".concat(et.a.card),onClick:function(e){a.push(function(e,t){switch(t){case Q.TV:return ce.DETAILTV.replace(":id",e);case Q.MOVIE:default:return ce.DETAILMOVIE.replace(":id",e)}}(c,o))}},r.a.createElement(Ze.a.Img,{src:t,alt:n}),r.a.createElement(Ze.a.ImgOverlay,null,r.a.createElement(Ze.a.Title,null,n)))};tt.defaultProps={};var nt=Object(N.e)(tt),at=function(e){var t=e.title,n=e.items,a=e.configurationTmdb,o=n.map(function(e){return r.a.createElement(nt,Object.assign({imageUrl:te(e.poster_path,$,a)},e))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t),r.a.createElement(Qe,{items:o}))},rt=function(e){function t(){return Object(R.a)(this,t),Object(P.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){return r.a.createElement(at,this.props)}}]),t}(r.a.Component),ot=Object(xe.a)(Object(i.b)(function(e,t){var n=t.listType,a=t.listOptions,r=Le(n,a),o=e.listsByType[r]||{loading:!0,error:!1,items:[]},c=function(e){switch(e){case W.POPULAR_SERIES:case W.SERIES_GENRE:return Z;default:return X}}(n);return{error:o.error,loading:o.loading,items:o.items.map(c),configurationTmdb:e.common.configuration}},function(e,t){var n=t.listType,a=t.listOptions;return{onLoad:function(){return e(Ce(n,a))}}}),We(function(e){return e.loading}))(rt);ot.defaultProps={listOptions:{}},ot.propTypes={title:_e.a.string.isRequired,listType:_e.a.oneOf(Object.keys(W)).isRequired,listOptions:_e.a.object};var ct=ot,it=function(e){return r.a.createElement(ge,null,r.a.createElement(ue.a,null,r.a.createElement(me.a,null,r.a.createElement(ct,{title:"Popular movies",listType:W.POPULAR_MOVIES})),r.a.createElement(me.a,null,r.a.createElement(ct,{title:"Popular series",listType:W.POPULAR_SERIES})),r.a.createElement(me.a,null,r.a.createElement(ct,{title:"Family",listType:W.POPULAR_SERIES,listOptions:{genre:Y}})),r.a.createElement(me.a,null,r.a.createElement(ct,{title:"Documentary",listType:W.MOVIES_GENRE,listOptions:{genre:J}}))))},lt=n(60),ut=n(121),st=n.n(ut),mt=n(47),dt=n.n(mt),Et=n(40),pt=n.n(Et),ft=n(37),vt=n(120),Ot=n.n(vt);function yt(e){ht(e.detail)}function ht(e){console.error("[ShakaPlayer] Error code",e.code,"object",e)}var gt=function(e){var t=e.id,n=e.imageUrl,a=e.videoUrl,o=e.width;return r.a.useEffect(function(){window.shaka.polyfill.installAll(),window.shaka.Player.isBrowserSupported()?function(e,t){var n=document.getElementById(e),a=new window.shaka.Player(n);window.player=a,a.addEventListener("error",yt),a.load(t).then(function(){console.log("[ShakaPlayer] The video has now been loaded!"),n.requestFullscreen?(console.log("[ShakaPlayer] requesting full screen ..."),n.requestFullscreen()):console.error("[ShakaPlayer] full screen not available!")}).catch(ht)}(t,a):console.error("[ShakaPlayer] Browser not supported!")},[t,n,a]),r.a.createElement(Ot.a,{aspect:"a16by9"},r.a.createElement("video",{id:t,width:o,poster:n,controls:!0,autoPlay:!0}))};gt.defaultProps={id:"video",width:"640"};var bt=gt,_t=(n(214),function(e){var t=e.message;return r.a.createElement("div",{className:"container d-flex h-100"},r.a.createElement("div",{className:" mx-auto align-self-center text-center"},r.a.createElement(ft.a,{className:"m-4",size:"6em"}),r.a.createElement("h1",null,t)))});_t.defaultProps={message:"Something went wrong, retry later."};var Tt,At=_t;var Rt=(Tt={},Object(g.a)(Tt,Q.MOVIE,function(e){var t=e.title,n=e.poster_path,a=e.overview,r=e.vote_average,o=e.popularity;return e.genres,{title:t,image:n,description:a,meta:{vote:r,popularity:o}}}),Object(g.a)(Tt,Q.TV,function(e){return{title:e.name,image:e.poster_path,description:e.overview,meta:{}}}),Tt),It=function(e){var t=r.a.useState(!1),n=Object(lt.a)(t,2),a=n[0],o=n[1],c=e.item,i=e.configurationTmdb,l=e.itemType,u=e.loading,s=e.error;if(u)return null;if(s)return r.a.createElement(At,{message:"Item not found"});var m=Rt[l]?Rt[l](c):c,d=m.title,E=m.description,p=m.image,f=m.meta,v=te(p,ee,i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt.a,{show:a,onHide:function(){return o(!1)},size:"xl"},r.a.createElement(pt.a.Header,{closeButton:!0},r.a.createElement(pt.a.Title,null,d)),r.a.createElement(pt.a.Body,null,r.a.createElement(bt,{imageUrl:te(p,$,i),videoUrl:"https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd",width:320})),r.a.createElement(pt.a.Footer,null,r.a.createElement(dt.a,{variant:"secondary",onClick:function(){return o(!1)}},"Close"))),r.a.createElement(ue.a,{className:"m-2 pt-2"},r.a.createElement(me.a,null,r.a.createElement(Ee.a,null,r.a.createElement("h1",null,d),r.a.createElement("p",{className:"lead"},E),r.a.createElement("hr",null),r.a.createElement("dl",{className:"row"},Object.keys(f).map(function(e,t){return r.a.createElement(r.a.Fragment,{key:"meta".concat(t)},r.a.createElement("dt",{className:"col-sm-3"},e),r.a.createElement("dd",{className:"col-sm-9"},f[e]))})),r.a.createElement("hr",null),r.a.createElement(dt.a,{variant:"primary",size:"lg",block:!0,onClick:function(e){e.preventDefault(),o(!0)}},r.a.createElement(ft.b,null)," Play")),r.a.createElement(Ee.a,{className:"align-self-center"},r.a.createElement(st.a,{src:v,thumbnail:!0})))))};It.defaultProps={};var Pt=It,jt=function(e){function t(){return Object(R.a)(this,t),Object(P.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){return r.a.createElement(Pt,this.props)}}]),t}(r.a.Component);function St(e){var t=e.isTv,n=e.isMovie;return t?Q.TV:n?Q.MOVIE:void 0}var wt=Object(xe.a)(Object(i.b)(function(e,t){var n=t.id,a=St(t),r=De(a,n),o=e.detailsByKey[r]||{loading:!0,error:!1,item:{}};return Object(s.a)({},o,{itemType:a,configurationTmdb:e.common.configuration})},function(e,t){var n=t.id,a=St(t);return{onLoad:function(){return e(Ue(a,n))}}}),We(function(e){return e.loading}))(jt);wt.defaultProps={},wt.propTypes={id:_e.a.string.isRequired,isTv:_e.a.bool,isMovie:_e.a.bool};var Nt=wt,Lt=function(e){var t=e.match,n=e.isTv,a=e.isMovie,o=D()(t,"params.id");return r.a.createElement(ge,null,r.a.createElement(Nt,{isTv:n,isMovie:a,id:o}))},Ct=n(61),Dt=n.n(Ct),kt=n(123),Mt=n.n(kt),Vt=n(124),Ut=n.n(Vt),Kt=n(122),Bt=n.n(Kt),Ht=function(e){var t=e.keyword,n=e.query,a=e.loading,o=e.results,c=e.fetchSearch,i=e.configurationTmdb,l=r.a.useState(t||n),u=Object(lt.a)(l,2),s=u[0],m=u[1],d=o?o.filter(function(e){return e.poster_path&&e.title}).map(function(e){return r.a.createElement(nt,Object.assign({imageUrl:te(e.poster_path,$,i)},e))}):null;return r.a.createElement(ue.a,{className:"mt-4"},r.a.createElement(me.a,{className:"mt-4"},r.a.createElement(Ee.a,null,r.a.createElement("h1",null,"Search"))),r.a.createElement(me.a,{className:"mb-4"},r.a.createElement(Ee.a,null,r.a.createElement(Dt.a,{onSubmit:function(e){e.preventDefault(),c(s)}},r.a.createElement(Dt.a.Row,null,r.a.createElement(Ee.a,{sm:10},r.a.createElement(Dt.a.Control,{autoFocus:!0,placeholder:"search movies and tv series titles",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement(Ee.a,{sm:2},r.a.createElement(dt.a,{disabled:a||Bt()(s),block:!0,variant:"primary",type:"submit"},a&&r.a.createElement(Mt.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),!a&&r.a.createElement(ft.c,null))))))),r.a.createElement(me.a,null,r.a.createElement(Ee.a,null,r.a.createElement(Ut.a,null,d))))};Ht.defaultProps={keyword:"",query:"",results:[]};var xt=Ht,Ft=Object(xe.a)(Object(i.b)(function(e){var t=e.search;return Object(s.a)({},t,{configurationTmdb:e.common.configuration})},function(e){return{fetchSearch:function(t){return e(function(e){return function(t){return t(Ke(e)),re.Search.multi(e).then(function(e){var n=ae(e.body);t(Be(n))},function(e){t(He())})}}(t))}}}))(xt),Gt=function(e){var t=e.match,n=D()(t,"params.keyword");return r.a.createElement(ge,null,r.a.createElement(Ft,{keyword:n}))},qt=function(e){var t=e.location,n=void 0===t?{}:t;return r.a.createElement(ge,{containerClassName:"fullscreen",rowClassName:"fullscreen"},r.a.createElement(At,{message:"Object not found for ".concat(n.pathname)}))},zt=function(e){return r.a.createElement(w.a,null,r.a.createElement(N.c,null,r.a.createElement(N.a,{exact:!0,path:[ie.SEARCH,ie.SEARCHKEYWORD],component:Gt}),r.a.createElement(N.a,{exact:!0,path:ie.DETAILMOVIE,render:function(e){return r.a.createElement(Lt,Object.assign({},e,{isMovie:!0}))}}),r.a.createElement(N.a,{exact:!0,path:ie.DETAILTV,render:function(e){return r.a.createElement(Lt,Object.assign({},e,{isTv:!0}))}}),r.a.createElement(N.a,{exact:!0,path:ie.HOME,component:it}),r.a.createElement(N.a,{component:qt})))},Wt=function(e){function t(){return Object(R.a)(this,t),Object(P.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.loading;return r.a.createElement(zt,{error:t,loading:n})}}]),t}(r.a.Component),Yt=Object(xe.a)(Object(i.b)(function(e){return{error:e.common.error,loading:e.common.loading}},function(e){return{onLoad:function(){return e(je())}}}),We(function(e){return e.loading}))(Wt),Jt=A();c.a.render(r.a.createElement(i.a,{store:Jt},r.a.createElement(Yt,null)),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.4da252bf.chunk.js.map